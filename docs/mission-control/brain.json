{
  "project": "montree",
  "lastUpdated": "2026-01-20T02:30:00Z",
  "session": 68,
  "phase": "Foundation Phase 1-4",
  "currentSubPhase": "API 404 FIX - Ready to deploy",
  "phaseStatus": "ðŸ‡¯ðŸ‡µ Quality verified, ready to push",
  
  "CORE_LAWS": [
    "1. CURRICULUM BELONGS TO CLASSROOM - Teachers can add/edit/delete works",
    "2. The /montree/ is THE PRODUCT. Standalone, duplicatable per school.",
    "3. The /admin/ is Tredoux's personal sandbox.",
    "4. Brain updates MANDATORY after every chunk of work.",
    "5. READ THIS FILE FIRST - Every session.",
    "6. JAPANESE ENGINEER MINDSET - Perfection before progress.",
    "7. SEGMENT WORK - Bite-size chunks, update brain after EVERY step."
  ],

  "SESSION_68_PROGRESS": {
    "objective": "Debug /api/montree/ 404 issue",
    "discovery": "Local works PERFECTLY - Railway deployment broken",
    "root_cause": "Missing output: 'standalone' in next.config.ts for Docker",
    "fixes_applied": [
      "1. Added output: 'standalone' to next.config.ts âœ…",
      "2. Updated start.sh to cd into standalone and run server.js âœ…",
      "3. Fixed Dockerfile cp commands for correct directory copying âœ…",
      "4. Local build tested - standalone folder created correctly âœ…"
    ],
    "quality_checks": [
      "âœ… next.config.ts has output: 'standalone'",
      "âœ… start.sh cd's into /app/.next/standalone before running",
      "âœ… Dockerfile mkdir -p .next/standalone/.next",
      "âœ… Dockerfile cp -r .next/static INTO .next/standalone/.next/",
      "âœ… Dockerfile cp -r public INTO .next/standalone/",
      "âœ… Local npm run build succeeds",
      "âœ… Standalone folder has server.js"
    ],
    "status": "READY TO DEPLOY"
  },

  "FILES_CHANGED": {
    "next.config.ts": "Added output: 'standalone'",
    "start.sh": "cd /app/.next/standalone && exec node server.js",
    "Dockerfile": "Fixed cp commands, added mkdir -p"
  },

  "FOUNDATION_STATUS": {
    "database": {
      "status": "âœ… COMPLETE",
      "tables": 8,
      "school_areas": 5,
      "school_works": 316
    },
    "code": {
      "status": "âœ… EXISTS"
    },
    "deployment": {
      "issue": "/api/montree/* routes returning 404",
      "root_cause": "Docker needs output: standalone",
      "fix_status": "READY TO DEPLOY",
      "test_url": "https://teacherpotato.xyz/api/montree/schools"
    }
  },

  "NEXT_ACTIONS": [
    "1. git add, commit, push",
    "2. Wait for Railway deploy",
    "3. Test https://teacherpotato.xyz/api/montree/schools",
    "4. If works â†’ SUCCESS! Write handoff",
    "5. If fails â†’ Check Railway build logs"
  ]
}
