{
  "CORE_LAWS": {
    "1_MONTREE_STANDALONE": "The /montree/dashboard/ is THE PRODUCT. Clean, standalone, premium.",
    "2_ADMIN_IS_SANDBOX": "The /admin/ system is Tredoux's personal sandbox. NOT the product.",
    "3_SCHOOLS_IS_LEGACY": "The /schools/ attempt is legacy. Don't touch.",
    "4_DATABASE_FIRST": "All data lives in Supabase. Frontend just displays it.",
    "5_COPY_PATTERNS_NOT_CODE": "Reuse logic patterns, but build fresh in /montree/"
  },

  "project": "Montree - Premium Montessori Platform",
  "codename": "Whale",
  "lastUpdated": "2026-01-17T23:30:00+08:00",
  "currentSession": "Session 40 - Architecture Mapped",

  "FULL_ARCHITECTURE": {
    "overview": "/montree is the product root. Three user types: Admin, Teacher, Parent.",
    
    "routes": {
      "/montree": "Landing page (marketing, pricing)",
      
      "/montree/admin": {
        "purpose": "School admin portal - setup and management",
        "priority": "Week 3",
        "pages": {
          "/students": "List all students",
          "/students/add": "Add new student form",
          "/students/[id]/edit": "Edit existing student",
          "/teachers": "Manage teachers",
          "/classrooms": "Classroom configuration",
          "/billing": "Subscription management"
        }
      },
      
      "/montree/dashboard": {
        "purpose": "THE PRODUCT - Teacher's daily tool",
        "priority": "NOW",
        "pages": {
          "/": "Student grid (18 students in YOUR order)",
          "/student/[id]": "Student detail (THE MONEY PAGE)",
          "/student/[id]/add-work": "Add work with photo capture",
          "/reports": "Generate weekly/monthly reports",
          "/games": "English games hub (11 games)",
          "/settings": "Teacher preferences"
        }
      },
      
      "/montree/parent": {
        "purpose": "Parent portal - view child progress",
        "priority": "Week 4+",
        "pages": {
          "/": "My child's progress overview",
          "/videos": "Weekly videos (WeChat ready)",
          "/reports": "View generated reports",
          "/games": "Practice games at home"
        }
      }
    }
  },

  "DATA_FLOW": {
    "admin": "Adds students, teachers, classrooms (setup phase)",
    "teacher": "Records progress, photos, videos (daily use)",
    "system": "Auto-generates reports and video compilations",
    "parent": "Receives videos, views progress (passive consumer)"
  },

  "BUILD_PRIORITY": {
    "NOW": "/dashboard - Teacher tool working perfectly",
    "WEEK_2": "/reports - Auto-generation of weekly/monthly reports",
    "WEEK_3": "/admin - Student/teacher management for schools",
    "WEEK_4+": "/parent - Parent portal with videos"
  },

  "DATABASE_SCHEMA": {
    "schools": "id, name, slug, subscription_tier",
    "children": "id, name, school_id, date_of_birth, display_order, active_status",
    "teachers": "id, name, email, school_id, role",
    "child_work_completion": "id, child_id, work_id, status, completed_date",
    "student_works": "id, student_id, work_name, area, photo_url, notes, created_at",
    "reports": "(future) id, child_id, type, generated_at, pdf_url, video_url"
  },

  "CURRENT_STATUS": {
    "deployment": "Railway - www.teacherpotato.xyz",
    "api_fix_pending": "Changed from hardcoded UUID to slug lookup",
    "needs_git_push": true
  },

  "FILES_CREATED_SESSION40": [
    "app/montree/dashboard/layout.tsx",
    "app/montree/dashboard/page.tsx",
    "app/montree/dashboard/student/[id]/page.tsx",
    "app/montree/dashboard/student/[id]/add-work/page.tsx",
    "app/montree/dashboard/reports/page.tsx",
    "app/montree/dashboard/games/page.tsx",
    "app/montree/dashboard/settings/page.tsx",
    "app/api/montree/students/route.ts",
    "app/api/montree/students/[id]/route.ts",
    "app/api/montree/works/route.ts",
    "app/api/montree/curriculum/route.ts",
    "app/api/health/route.ts"
  ],

  "WHALE_CLASS": {
    "students_ordered": [
      "Rachel", "Yueze", "Lucky", "Austin", "Minxi", "Leo",
      "Joey", "Eric", "Jimmy", "Kevin", "Niuniu", "Amy",
      "Henry", "Segina", "Hayden", "KK", "Kayla", "Stella"
    ],
    "total": 18,
    "teachers": ["Tredoux (lead)", "Vanessa", "Dana", "Jenny"]
  },

  "SCHOOL_LOOKUP": {
    "method": "BY SLUG not hardcoded UUID",
    "slug": "beijing-international",
    "note": "API now looks up school dynamically"
  },

  "TEST_URLS": {
    "health": "https://www.teacherpotato.xyz/api/health",
    "dashboard": "https://www.teacherpotato.xyz/montree/dashboard",
    "local": "http://localhost:3000/montree/dashboard"
  },

  "NEXT_STEPS": [
    "1. git push the API fix (slug lookup)",
    "2. Test dashboard loads students",
    "3. Test student detail page",
    "4. Test add work flow",
    "5. Build /montree/admin/students when dashboard is solid"
  ]
}
