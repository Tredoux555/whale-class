{
  "project": "Montree",
  "session": 133,
  "lastUpdated": "2026-01-31T23:45:00+08:00",

  "STATUS": "üìö CURRICULUM GUIDE DATA - 3% complete (8/268 works). See HANDOFF for full list.",

  "HANDOFF": "docs/HANDOFF_CURRICULUM_GUIDES.md",
  "PREVIOUS_HANDOFF": "docs/HANDOFF_SESSION131_UI_CLEANUP.md",
  "DATA_FLOW_DOC": "docs/PROGRESS_DATA_FLOW.md",

  "SESSION_131_CLEANUP": {
    "summary": "Simplified teacher dashboard to minimal interface - just students and camera",
    "philosophy": "Teachers manage works and students. Nothing else. Keep it clean.",
    "fixes_applied": [
      "REMOVED footer completely - no more icons cluttering the screen",
      "Camera button: Top right header (next to logout)",
      "Student grid: Now includes '+' tile to add students",
      "Tools/Settings pages: Still exist but NOT linked from main UI",
      "Parent dashboard: Added games link for practice at home",
      "Admin settings: Created new page (was 404)",
      "Admin teachers: Fixed API query that returned empty data",
      "Admin students: Changed DOB to age picker for consistency",
      "FIXED: 'Failed to add student' - Added POST handler to /api/montree/children",
      "FIXED: Students page now uses /api/montree/children (not /api/montree/onboarding/students)"
    ],
    "files_modified": [
      "app/montree/dashboard/page.tsx - REMOVED FOOTER",
      "app/montree/dashboard/settings/page.tsx",
      "app/montree/parent/dashboard/page.tsx",
      "app/montree/admin/settings/page.tsx (NEW)",
      "app/api/montree/admin/teachers/route.ts",
      "app/montree/admin/students/page.tsx",
      "app/api/montree/children/route.ts - ADDED POST handler",
      "app/montree/dashboard/students/page.tsx - Fixed API endpoint"
    ]
  },

  "CURRICULUM_DATA": {
    "IMPORTANT_NOTE": "‚ö†Ô∏è ONBOARDING MUST COPY ALL DATA FROM BRAIN TO CLASSROOM",

    "COMPREHENSIVE_GUIDES": {
      "location": "lib/curriculum/comprehensive-guides/",
      "description": "Single source of truth for ALL teacher guide data",
      "files": {
        "practical-life-guides.json": "83 works",
        "sensorial-guides.json": "35 works",
        "math-guides.json": "57 works",
        "language-guides.json": "43 works",
        "cultural-guides.json": "50 works",
        "AUDIT.json": "Coverage status"
      },
      "CURRENT_COVERAGE": {
        "total_works": 268,
        "complete": 8,
        "coverage_percent": "3.0%",
        "practical_life": "8/83 (9.6%)",
        "sensorial": "0/35 (0%)",
        "math": "0/57 (0%)",
        "language": "0/43 (0%)",
        "cultural": "0/50 (0%)"
      },
      "data_format": {
        "quick_guide": "3-5 bullet points for 10-second teacher scan",
        "presentation_steps": "[{step, title, description, tip}] - Full AMI album",
        "points_of_interest": "What captures child's attention",
        "control_of_error": "How child self-corrects",
        "variations": "Different presentation options",
        "common_challenges": "Teacher pitfalls to avoid"
      }
    },

    "master_table": "montessori_works (THE BRAIN)",
    "classroom_table": "montree_classroom_curriculum_works",

    "data_flow": {
      "description": "When classroom created, ALL data copies from Brain to classroom table",
      "seeding_code": "app/api/montree/principal/setup-stream/route.ts lines 192-220",
      "must_copy": ["quick_guide", "video_search_term", "presentation_steps", "direct_aims", "materials_needed", "control_of_error", "parent_description", "why_it_matters"]
    },

    "migrations": {
      "schema": "supabase/migrations/050_digital_handbook.sql",
      "quick_guides": "supabase/migrations/090_quick_guide_columns.sql (12 works)",
      "language_data": "supabase/migrations/051_english_handbook_seed.sql (5 works)",
      "practical_life": "migrations/102_practical_life_comprehensive.sql (NEW - 10 works)"
    },

    "guide_api": {
      "endpoint": "/api/montree/works/guide?name=Work+Name&classroom_id=xxx",
      "behavior": "Checks classroom first, falls back to master Brain"
    },

    "TO_COMPLETE": {
      "priority_1": "Populate remaining 75 Practical Life works",
      "priority_2": "Populate 35 Sensorial works",
      "priority_3": "Populate 57 Math works (research DONE)",
      "priority_4": "Populate 43 Language works",
      "priority_5": "Populate 50 Cultural works",
      "how": "Use Claude with docs/CLAUDE_PROMPT_PRESENTATION_STEPS.md to generate data"
    }
  },

  "TEACHER_UI": {
    "dashboard": "/montree/dashboard",
    "layout": {
      "header": "Classroom name + üì∑ Camera + Logout",
      "main": "Student grid (full screen) with '+' tile to add students",
      "footer": "REMOVED - no footer"
    },
    "flow": "Dashboard ‚Üí Click student ‚Üí Manage works/progress",
    "hidden_pages": [
      "/montree/dashboard/tools - exists but not linked",
      "/montree/dashboard/settings - exists but not linked"
    ]
  },

  "ROLE_SEPARATION": {
    "teacher": {
      "dashboard": "/montree/dashboard",
      "ui": "Minimal: Student grid + Camera only",
      "features": ["Student grid", "Camera capture", "Progress tracking per student"]
    },
    "principal": {
      "dashboard": "/montree/admin",
      "ui": "Full management interface",
      "features": ["All classrooms", "All teachers", "All students", "School settings"]
    },
    "parent": {
      "dashboard": "/montree/parent/dashboard",
      "features": ["View child progress", "Weekly reports", "Practice games"]
    }
  },

  "DATA_CONVENTIONS": {
    "area_in_progress_table": "STRING key like 'practical_life' (NOT UUID)",
    "area_in_curriculum_tables": "UUID foreign key",
    "work_identification": "work_name string (case-insensitive matching)",
    "status_values": ["not_started", "presented", "practicing", "mastered"],
    "progress_calculation": "All works BEFORE current position count as completed",
    "age_storage": "Numeric (2, 2.5, 3, 3.5, etc.) - NOT date_of_birth"
  },

  "STATUS_TRACKING_TODO": {
    "description": "Implement manual status changes with automatic timestamps",
    "current_state": "mastered_at captured, but missing other status timestamps",
    "proposed_fields": [
      "practicing_at TIMESTAMPTZ - when status changed to practicing",
      "status_changed_at TIMESTAMPTZ - last status change time",
      "changed_by UUID - teacher who made the change"
    ],
    "philosophy": "Trust teacher judgment. Manual status changes, automatic timestamp capture.",
    "implementation": "When teacher changes status, capture timestamp automatically in background"
  },

  "LIVE_URL": "https://teacherpotato.xyz/montree"
}
